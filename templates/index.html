{{define "body"}}
<div class="parent">
  <aside class="aside-container">
    <h1 class="aside__title">The Great Divide Mountain Bike Route </h1>
    <article class="aside__text mb-20">
      <p>For the next 30 days I will be riding my bicycle with two friends from Canada to Mexico.</p>
      <p>You can see the planned route in blue and the completed part in red on the map. I am carrying a GPS tracker
        that will update the map with my live location and all other stats every 10 minutes. This GPS tracker can also
        send and receive messages, further down is a way of sending me messages either through space via satellites
        directly to the tracker or just simply through copper and fiber optic to this website.</p>
    </article>
    <section class="aside__route mb-20">
      <h2>Planned Route</h2>
      <article class="block col-2">
        <section class="row">
          <div class="col">3,891 km<small class="label">Distance</small></div>
        </section>
        <section class="row">
          <div class="col">44,009 m<small class="label">Elevation Gain</small></div>
          <div class="col">43,413 m<small class="label">Elevation Loss</small></div>
        </section>
        <section class="row">
          <div class="col">13.8 %<small class="label">Max Grade</small></div>
          <div class="col">-27.4 %<small class="label">Min Grade</small></div>
        </section>
        <section class="row">
          <div class="col">39 %<small class="label">Paved</small></div>
          <div class="col">61 %<small class="label">Unpaved</small></div>
        </section>
        <section class="row">
          <div class="col">30 days<small class="label">Estimated Duration</small></div>
        </section>
        <section class="row">
          <div class="col">Sep 9th 2024<small class="label">Start Date</small></div>
          <div class="col">Oct 9th 2024<small class="label">End Date</small></div>
        </section>
      </article>
    </section>
    <section class="aside__ride mb-20">
      <h2>Actual Ride</h2>
      <article class="block col-2">
        <section class="row">
          <div class="col">
            {{ if .Ride.IsMoving }}
            Yes
            {{ else }}
            No
            {{ end }}
            <small class="label">Currently Moving</small>
          </div>
          <div class="col">
            <div id="lastPing"></div><small class="label">Last Signal</small>
          </div>
        </section>
        <section class="row">
          <div class="col">
            {{ if .Ride.Distance }}
            {{ .Ride.Distance }} km
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Distance</small>
          </div>
          <div class="col">
            {{ if .Ride.Progress }}
            {{ .Ride.Progress }} %
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Progress</small>
          </div>
        </section>
        <section class="row">
          <div class="col">
            {{ if .Ride.ElevationGain }}
            {{ .Ride.ElevationGain }} m
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Elevation Gain</small>
          </div>
          <div class="col">
            {{ if .Ride.ElevationLoss }}
            {{ .Ride.ElevationLoss }} m
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Elevation Loss</small>
          </div>
        </section>
        <section class="row">
          <div class="col">
            {{ if .Ride.CurrentSpeed }}
            {{ .Ride.CurrentSpeed }} km/h
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Current Speed</small>
          </div>
          <div class="col">{{ .LastEvent.Altitude }} m<small class="label">Current Elevation</small></div>
        </section>
        <section class="row">
          <div class="col">
            {{ if .Ride.MovingTime }}
            {{ .Ride.MovingTime }}
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Moving Time</small>
          </div>
          <div class="col">
            {{ if .Ride.RestingTime }}
            {{ .Ride.RestingTime }}
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Resting Time</small>
          </div>
        </section>
        <section class="row">
          <div class="col">
            {{ if .Ride.ElapsedDays }}
            {{ .Ride.ElapsedDays }} days
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Elapsed Days</small>
          </div>
          <div class="col">
            {{ if .Ride.RemainingDays }}
            {{ .Ride.RemainingDays }} days
            {{ else }}
            N/A
            {{ end }}
            <small class="label">Remaining Days</small>
          </div>
        </section>
      </article>
    </section>
  </aside>
  <div class="map-container">
    <div id="mapid" class="map"></div>
  </div>
  <div class="messages-container">
    <h2>Messages</h2>
    <form class="box" action="/messages" method="post">
      <label hidden for="name">Name:</label>
      <input class="text-box" required type="text" id="name" name="name" placeholder="Your name"><br>
      <label hidden for="message">Message:</label>
      <textarea class="text-box" rows="4" required minlength="2" maxlength="160" type="text" id="message" name="message" placeholder="Write a message..."></textarea><br>
      <div class="flex">
        <div>
          <input type="checkbox" id="sentToGarmin" name="sentToGarmin" value="true">
          <label for="sentToGarmin">Send to my tracker*</label>
        </div>
        <input class="button" type="submit" value="Send">
      </div>
      <small class="disclaimer">*I will receive the message immediately on my Garmin Tracker.</small>
    </form>
    <ul>
      {{ range .Messages }}
      <li class="box">
        <header class="box__header box__header--baseline">
          <h3 class="box__title ft-l">{{ .Name }} wrote </h3>
          <small class="box__subtitle">{{ wroteOnTime .TimeStamp }}</small>
        </header>
        <section>
          <p>{{ .Message }}</p>
        </section>
      </li>
      {{ end }}
    </ul>
  </div>
  <div class="days-container">
    <h2>Days</h2>
    <ol>
      {{ range $i, $d := .Days }}
      <li class="box">
        <header class="box__header">
          <h3 class="box__title">{{ addOne $i }}</h3>
          <small class="box__subtitle">{{ onDay $d.TimeStamp }}</small>
        </header>
        <section class="row row-flex">
          <div class="box_metric">{{ oneDecimal (inKm $d.TotalDistance) }} km<small class="label">Distance</small></div>
          <div class="box_metric">{{ oneDecimal $d.AverageSpeed }} km/h<small class="label">Speed</small></div>
          <div class="box_metric">{{ $d.ElevationGain }} m<small class="label">Elevation Gain</small></div>
          <div class="box_metric">{{ $d.AverageAltitude }} m<small class="label">Average Altitude</small></div>
          <div class="box_metric">{{ time $d.MovingTimeInSeconds }}<small class="label">Time</small></div>
        </section>
      </li>
      {{ end }}
    </ol>
  </div>
</div>


{{end}}
